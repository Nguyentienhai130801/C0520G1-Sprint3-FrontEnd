<div class="col-lg-12 col-md-12 card m-0 p-0">
  <div class="col-md-12 card-header text-center m-0 p-0"
       style=" background: #0b222a;color: #ffbb0b;font-weight: bolder;font-size: 20px">
    Dịch vụ
  </div>
  <div class="card-body container register  border border-dark">
    <div class="row">
      <div class="col-md-12 register-right">
        <ul class="nav nav-tabs nav-justified" id="myTab" role="tablist">
          <li class="nav-item">
            <a class="nav-link active font-weight-bold" id="drink-tab" data-toggle="tab" href="#drink" role="tab"
               aria-controls="drink" aria-selected="true" style="color: black">Đồ uống</a>
          </li>
          <li class="nav-item">
            <a class="nav-link font-weight-bold" id="food-tab" data-toggle="tab" href="#food" role="tab"
               aria-controls="food" aria-selected="false" style="color: black">Đồ ăn</a>
          </li>
          <li class="nav-item">
            <a class="nav-link font-weight-bold" id="card-tab" data-toggle="tab" href="#card" role="tab"
               aria-controls="card" aria-selected="false" style="color: black">Card điện thoại</a>
          </li>
        </ul>
        <form [formGroup]="formBill">
          <div class="tab-content" id="myTabContent" formGroupName="listAllService">
            <div class="tab-pane fade show active" id="drink" role="tabpanel" aria-labelledby="drink-tab">
              <div class="container" formArrayName="listServiceRecordsDrink">
                <table class="table table-borderless">
                  <thead>
                  <tr class="text-center">
                    <th class="text-primary" scope="col">Loại nước</th>
                    <th class="text-primary" scope="col">Giá (VNĐ)</th>
                    <th class="text-primary" scope="col">Số lượng</th>
                    <th class="text-primary" scope="col">Kho</th>
                  </tr>
                  <tr *ngFor="let element of listServiceRecordsDrink.controls,let i=index">
                    <ng-container [formGroupName]="i">
                      <td>
                        <input class="form-control form-control-sm" #idDrinks formControlName="idService" type="hidden">
                        <input class="form-control form-control-sm" formControlName="serviceName" readonly>
                      </td>
                      <td><input class="form-control form-control-sm" formControlName="price" readonly></td>
                      <td><input class="form-control form-control-sm" #valueDrink formControlName="quantityPurchased"
                                 type="number" [readOnly]="checkMessagePaymentSuccess==true"
                                 (change)="totalMoneyBooked(formatNumber(idDrinks.value),formatNumber(valueDrink.value))"
                                 min="0" max="{{quantity.value}}"></td>
                      <td><input class="form-control form-control-sm" #quantity readonly formControlName="quantity">
                      </td>
                      <td class="text-center align-content-center" *ngIf="quantity.value == 0"><p
                        class="text-danger font-weight-bold font-italic" style="font-size: 12px">Hết</p></td>
                    </ng-container>
                  </tr>
                  </thead>
                </table>
              </div>
            </div>
            <div class="tab-pane fade show" id="food" role="tabpanel" aria-labelledby="food-tab">
              <div class="container" formArrayName="listServiceRecordsFood">
                <table class="table table-borderless">
                  <thead>
                  <tr class="text-center">
                    <th class="text-primary" scope="col">Món ăn</th>
                    <th class="text-primary" scope="col">Giá (VNĐ)</th>
                    <th class="text-primary" scope="col">Số lượng</th>
                    <th class="text-primary" scope="col">Kho</th>
                  </tr>
                  <tr *ngFor="let element of listServiceRecordsFood.controls,let i=index">
                    <ng-container [formGroupName]="i">
                      <td>
                        <input class="form-control form-control-sm" #idFood formControlName="idService" type="hidden">
                        <input class="form-control form-control-sm" formControlName="serviceName" readonly>
                      </td>
                      <td><input class="form-control form-control-sm" formControlName="price" readonly></td>
                      <td><input class="form-control form-control-sm" #valueFood formControlName="quantityPurchased"
                                 type="number" [readOnly]="checkMessagePaymentSuccess==true"
                                 (change)="totalMoneyBooked(formatNumber(idFood.value),formatNumber(valueFood.value))"
                                 min="0" max="{{quantity.value}}"></td>
                      <td><input class="form-control form-control-sm" #quantity readonly formControlName="quantity">
                      </td>
                      <td class="text-center align-content-center" *ngIf="quantity.value == 0"><p
                        class="text-danger font-weight-bold font-italic" style="font-size: 12px">Hết</p></td>
                    </ng-container>
                  </tr>
                  </thead>
                </table>
              </div>
            </div>
            <div class="tab-pane fade show" id="card" role="tabpanel" aria-labelledby="card-tab">
              <div class="container" formArrayName="listServiceRecordsCard">
                <table class="table table-borderless">
                  <thead>
                  <tr class="text-center">
                    <th class="text-primary" scope="col">Loại card</th>
                    <th class="text-primary" scope="col">Giá (VNĐ)</th>
                    <th class="text-primary" scope="col">Số lượng</th>
                    <th class="text-primary" scope="col">Kho</th>
                  </tr>
                  <tr *ngFor="let element of listServiceRecordsCard.controls,let i=index">
                    <ng-container [formGroupName]="i">
                      <td>
                        <input class="form-control form-control-sm" #idCard formControlName="idService" type="hidden">
                        <input class="form-control form-control-sm" formControlName="serviceName" readonly>
                      </td>
                      <td><input class="form-control form-control-sm" formControlName="price" readonly></td>
                      <td><input class="form-control form-control-sm" #valueCard formControlName="quantityPurchased"
                                 type="number" [readOnly]="checkMessagePaymentSuccess == true"
                                 (change)="totalMoneyBooked(formatNumber(idCard.value),formatNumber(valueCard.value))"
                                 min="0" max="{{quantity.value}}"></td>
                      <td><input class="form-control form-control-sm" readonly #quantity formControlName="quantity">
                      </td>
                      <td class="text-center align-content-center" *ngIf="quantity.value == 0"><p
                        class="text-danger font-weight-bold font-italic" style="font-size: 12px">Hết</p></td>
                    </ng-container>
                  </tr>
                  </thead>
                </table>
              </div>
            </div>
            <div class="text-center col-md-12">
              <p class="text-danger ml-5" *ngIf="formBill.invalid">Số lượng không hợp lệ. Vui lòng nhập lại</p>
            </div>
            <hr>
            <div class="col-md-12 row form-inline text-center m-0 p-0">
              <div class="col-md-6 d-flex justify-content-start p-0">
                <label class="font-weight-bold m-0 p-0">Tổng số tiền <input class="form-control form-control-sm ml-2"
                                                                            [value]="totalMoneyShow + ' VNĐ'" type="text"
                                                                            readonly></label>
              </div>
              <div class="col-md-6 d-flex justify-content-end m-0 p-0">
                <label class="font-weight-bold m-0 p-0">Số dư tài khoản <input
                  class="form-control form-control-sm ml-2 m-0 p-0"
                  type="text" [value]="moneyUserShow +' VNĐ'"
                  readonly></label>
              </div>
            </div>
            <div class="col-md-12 row mt-4 form-inline m-0 p-0">
              <div class="col-md-6 d-flex justify-content-start m-0 p-0">
                <label class="font-weight-bold ">Hình thức thanh toán
                  <select class="ml-2 form-control-sm" (change)="event($event)"
                          [disabled]="checkMessagePaymentSuccess == true">
                    <option value="0">- Chọn -</option>
                    <option value="1">Trực tiếp</option>
                    <option value="2">Trừ vào tài khoản</option>
                    <option value="3">Thanh toán bằng PayPal</option>
                  </select></label>
              </div>
              <div class="col-md-6 d-flex justify-content-end  m-0 p-0" *ngIf="checkButtonPay == true && totalMoney>0">
                <button [hidden]="formBill.invalid" class="btn  btn-info text-light m-0 p-0 "
                        style="width: 100%;height:50px;font-size: 13px;font-weight: bolder "
                        (click)="payment()">Thanh toán
                </button>
              </div>
              <div class="p-0 m-0 justify-content-end col-md-6 " #paypalRef
                   [hidden]="checkButtonPayPal == false || totalMoney <= 0 ||formBill.invalid"></div>
            </div>
            <div class="col-md-12 text-center mt-4">
              <p class="text-success " style="font-size: 15px"
                 *ngIf="checkMessagePaymentSuccess == true && totalMoney>0"> Thanh toán thành công.
                Vui
                lòng nhấn
                nút <span class="text-danger font-weight-bold" style="font-size: 15px">"Gửi yêu cầu"</span> để
                nhận dịch vụ</p>
            </div>
          </div>
          <div class="mt-5 mb-2 d-flex justify-content-center">
            <button class="btn btn-sm btn-dark text-light font-weight-bolder " style="width: 100px" mat-dialog-close=""> Hủy
            </button>
            <!--            trừ vào tài khoản-->
            <button class="btn btn-sm btn-danger ml-5 text-light font-weight-bold" style="width: 100px" role="button"
                    [disabled]="totalMoney == 0 || isPayDirect == false|| formBill.invalid "
                    *ngIf="checkSubmitAccount == true"
                    (click)="createBillPaymentByAccount()"> Gửi yêu cầu
            </button>
            <!--            thanh toán trực tiếp-->
            <button class="btn btn-sm btn-danger ml-5 text-light font-weight-bolder" style="width: 100px" role="button"
                    [disabled]="totalMoney == 0 || isPayDirect == false|| formBill.invalid"
                    *ngIf="checkSubmitDirect == false"
                    (click)="creatBillPaymentDirect()"> Gửi yêu cầu
            </button>
            <!--            thanh toán qua paypal-->
            <button class="btn btn-sm btn-danger ml-5 text-light font-weight-bold" style="width: 100px" role="button"
                    [disabled]="totalMoney == 0 || isPayDirect == false|| formBill.invalid"
                    *ngIf="checkSubmitPayPal == true "
                    (click)="createBillPaymentByPayPal()"> Gửi yêu cầu
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="col-md-12 card-footer m-0 p-1" style="background: #0b222a">
  </div>
</div>
